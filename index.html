<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#075e54">
  <title>WhatsChat | MensajerÃ­a Simple y RÃ¡pida ðŸ’¬</title>
  <meta name="description" content="WhatsChat: Chatea con tus amigos y familiares con una interfaz familiar y fÃ¡cil de usar. Â¡ConÃ©ctate de forma instantÃ¡nea y segura!">
  <meta name="keywords" content="WhatsChat, Chat, MensajerÃ­a, Social, ComunicaciÃ³n, Amigos, Mensajes, WhatsApp Style">
  <meta name="author" content="AgustÃ­n DÃ­az">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://whatschat-ix08.onrender.com/">
  <link rel="icon" href="https://i.imgur.com/RtN3nkM.jpeg">
  <meta property="og:title" content="WhatsChat: La MensajerÃ­a que Conoces ðŸŸ¢">
  <meta property="og:description" content="Una aplicaciÃ³n de chat rÃ¡pida y privada con el diseÃ±o que ya amas. EnvÃ­a mensajes, fotos y audios al instante.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://i.imgur.com/RtN3nkM.jpeg">
  <meta property="og:url" content="https://whatschat-ix08.onrender.com/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="WhatsChat: Chatea Ya Mismo ðŸ‘‹">
  <meta name="twitter:description" content="ComunÃ­cate sin complicaciones. Disfruta de una experiencia de chat intuitiva y enfocada en lo que importa: tus conversaciones.">
  <meta name="twitter:image" content="https://i.imgur.com/RtN3nkM.jpeg">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Helvetica Neue, Helvetica, Lucida Grande, Arial, sans-serif;
    }

    body {
      background-color: #111b21;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    /* App container */
    .whatsapp-app {
      width: 100%;
      max-width: 1600px;
      height: 95vh;
      background-color: #111b21;
      display: flex;
      border-radius: 3px;
      overflow: hidden;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
    }

    /* Left sidebar - Contact list */
    .sidebar {
      width: 30%;
      min-width: 380px;
      max-width: 420px;
      background-color: #111b21;
      border-right: 1px solid #2f3b43;
      display: flex;
      flex-direction: column;
      color: #e9edef;
    }

    /* Sidebar header */
    .sidebar-header {
      padding: 10px 16px;
      background-color: #202c33;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 60px;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      background-color: #6a7175;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #111b21;
      font-weight: bold;
      cursor: pointer;
    }

    .avatar-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .sidebar-actions {
      display: flex;
      gap: 20px;
    }

    .sidebar-actions i {
      font-size: 20px;
      color: #aebac1;
      cursor: pointer;
    }

    /* Search bar */
    .search-container {
      padding: 8px 12px;
      background-color: #111b21;
      border-bottom: 1px solid #222e35;
    }

    .search-box {
      background-color: #202c33;
      border-radius: 8px;
      padding: 8px 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .search-box i {
      color: #8696a0;
      font-size: 14px;
    }

    .search-box input {
      background: transparent;
      border: none;
      outline: none;
      color: #e9edef;
      font-size: 15px;
      flex: 1;
    }

    .search-box input::placeholder {
      color: #8696a0;
    }

    /* Contact list */
    .contact-list {
      flex: 1;
      overflow-y: auto;
      background-color: #111b21;
    }

    .contact-item {
      display: flex;
      padding: 12px 16px;
      cursor: pointer;
      border-bottom: 1px solid #222e35;
      transition: background-color 0.2s;
    }

    .contact-item:hover {
      background-color: #202c33;
    }

    .contact-item.active {
      background-color: #2a3942;
    }

    .contact-avatar {
      width: 49px;
      height: 49px;
      border-radius: 50%;
      overflow: hidden;
      background-color: #6a7175;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #111b21;
      font-weight: bold;
      margin-right: 15px;
    }

    .contact-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .contact-name-time {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .contact-name {
      font-size: 17px;
      color: #e9edef;
    }

    .contact-time {
      font-size: 12px;
      color: #8696a0;
    }

    .contact-last-message {
      font-size: 14px;
      color: #8696a0;
      display: flex;
      align-items: center;
    }

    .unread-badge {
      background-color: #00a884;
      color: #111b21;
      font-size: 12px;
      font-weight: bold;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: auto;
    }

    /* Chat main area */
    .chat-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      background-color: #0b141a;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23111b21' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    /* Chat header */
    .chat-header {
      padding: 10px 16px;
      background-color: #202c33;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 60px;
      border-bottom: 1px solid #2f3b43;
    }

    .chat-contact-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .chat-contact-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      background-color: #6a7175;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #111b21;
      font-weight: bold;
    }

    .chat-contact-details h3 {
      color: #e9edef;
      font-size: 16px;
      font-weight: 500;
    }

    .chat-contact-details p {
      color: #8696a0;
      font-size: 13px;
      margin-top: 2px;
    }

    .chat-actions {
      display: flex;
      gap: 25px;
      color: #aebac1;
    }

    .chat-actions i {
      font-size: 20px;
      cursor: pointer;
    }

    /* Messages container */
    .messages-container {
      flex: 1;
      overflow-y: auto;
      padding: 20px 80px;
      display: flex;
      flex-direction: column;
    }

    /* Messages */
    .message {
      max-width: 65%;
      padding: 6px 7px 8px 9px;
      margin-bottom: 8px;
      border-radius: 7.5px;
      position: relative;
      word-wrap: break-word;
      box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);
    }

    .message.sent {
      background-color: #005c4b;
      align-self: flex-end;
      border-top-right-radius: 0;
    }

    .message.received {
      background-color: #202c33;
      align-self: flex-start;
      border-top-left-radius: 0;
    }

    .message-text {
      color: #e9edef;
      font-size: 14.2px;
      line-height: 19px;
      padding-right: 40px;
    }

    .message-time {
      position: absolute;
      bottom: 6px;
      right: 7px;
      font-size: 11px;
      color: #ffffff99;
      display: flex;
      align-items: center;
      gap: 3px;
    }

    .message.sent .message-time {
      color: #99ffe1;
    }

    .message-info {
      display: flex;
      justify-content: flex-end;
      margin-top: 2px;
    }

    .message-date {
      color: #8696a0;
      font-size: 12.5px;
      padding: 25px 0 15px;
      text-align: center;
    }

    /* Input area */
    .input-area {
      padding: 10px 16px;
      background-color: #202c33;
      display: flex;
      align-items: center;
      gap: 8px;
      min-height: 62px;
    }

    .input-actions {
      display: flex;
      gap: 15px;
      color: #8696a0;
      font-size: 24px;
    }

    .input-actions i {
      cursor: pointer;
    }

    .message-input-container {
      flex: 1;
      background-color: #2a3942;
      border-radius: 8px;
      padding: 9px 12px;
      display: flex;
      align-items: center;
    }

    .message-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: #e9edef;
      font-size: 15px;
      max-height: 100px;
      resize: none;
      font-family: inherit;
      padding: 0;
    }

    .message-input::placeholder {
      color: #8696a0;
    }

    .input-smile {
      color: #8696a0;
      font-size: 22px;
      margin-left: 10px;
      cursor: pointer;
    }

    .voice-message-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #005c4b;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      cursor: pointer;
      margin-left: 8px;
    }

    /* Icons */
    i {
      font-style: normal;
    }

    .icon {
      display: inline-block;
      width: 24px;
      height: 24px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }

    .icon-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23aebac1'%3E%3Cpath d='M12 7a2 2 0 1 0-.001-4.001A2 2 0 0 0 12 7zm0 2a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 9zm0 6a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 15z'/%3E%3C/svg%3E"); }
    .icon-status { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23aebac1'%3E%3Ccircle cx='12' cy='12' r='8'/%3E%3C/svg%3E"); }
    .icon-chat { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23aebac1'%3E%3Cpath d='M19.005 3.175H4.674C3.642 3.175 3 3.789 3 4.821V21.02l3.544-3.514h12.461c1.033 0 2.064-1.06 2.064-2.093V4.821c-.001-1.032-1.032-1.646-2.064-1.646zm-4.989 9.869H7.041V11.1h6.975v1.944zm3-4H7.041V7.1h9.975v1.944z'/%3E%3C/svg%3E"); }
    .icon-community { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23aebac1'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9 12c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm7 0c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zm2.5 0c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5z'/%3E%3C/svg%3E"); }
    .icon-search { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238696a0'%3E%3Cpath d='M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3C/svg%3E"); }
    .icon-filter { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238696a0'%3E%3Cpath d='M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z'/%3E%3C/svg%3E"); }
    .icon-attach { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238696a0'%3E%3Cpath d='M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z'/%3E%3C/svg%3E"); }
    .icon-mic { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3E%3Cpath d='M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z'/%3E%3Cpath d='M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z'/%3E%3C/svg%3E"); }
    .icon-send { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3E%3Cpath d='M2.01 21L23 12 2.01 3 2 10l15 2-15 2z'/%3E%3C/svg%3E"); }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #374045;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #4a5c65;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .sidebar {
        display: none;
      }
      
      .messages-container {
        padding: 20px 20px;
      }
    }
  </style>
</head>
<body>
  <div class="whatsapp-app">
    <!-- Left sidebar with contacts -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="user-avatar">
          <div class="avatar-img">TÃº</div>
        </div>
        <div class="sidebar-actions">
          <div class="icon icon-community"></div>
          <div class="icon icon-status"></div>
          <div class="icon icon-chat"></div>
          <div class="icon icon-menu"></div>
        </div>
      </div>
      
      <div class="search-container">
        <div class="search-box">
          <div class="icon icon-search"></div>
          <input type="text" placeholder="Buscar o empezar un chat nuevo">
          <div class="icon icon-filter"></div>
        </div>
      </div>
      
      <div class="contact-list">
        <!-- Active chat will be highlighted -->
        <div class="contact-item active">
          <div class="contact-avatar">
            GC
          </div>
          <div class="contact-info">
            <div class="contact-name-time">
              <div class="contact-name">Grupo de WhatsChat</div>
              <div class="contact-time" id="current-time">--:--</div>
            </div>
            <div class="contact-last-message">
              <span id="last-message-preview">TÃº: Bienvenido al chat</span>
              <div class="unread-badge" id="unread-count">1</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Main chat area -->
    <div class="chat-main">
      <div class="chat-header">
        <div class="chat-contact-info">
          <div class="chat-contact-avatar">
            GC
          </div>
          <div class="chat-contact-details">
            <h3>Grupo de WhatsChat</h3>
            <p>En lÃ­nea</p>
          </div>
        </div>
        
        <div class="chat-actions">
          <div class="icon icon-search"></div>
          <div class="icon icon-menu"></div>
        </div>
      </div>
      
      <!-- Messages container -->
      <div class="messages-container" id="mensajes">
        <div class="message-date" id="current-date">Hoy</div>
        
        <!-- Messages will be inserted here by JavaScript -->
        <div class="message received">
          <div class="message-text">Â¡Bienvenido a WhatsChat! Este es un chat grupal donde todos pueden participar. Los mensajes se guardan automÃ¡ticamente.</div>
          <div class="message-time">10:00</div>
        </div>
        
        <div class="message sent">
          <div class="message-text">Â¡Hola a todos! Me encanta esta interfaz, se ve exactamente como WhatsApp.</div>
          <div class="message-time">
            10:02
            <span>âœ“âœ“</span>
          </div>
        </div>
      </div>
      
      <!-- Input area -->
      <div class="input-area">
        <div class="input-actions">
          <div class="icon icon-attach"></div>
        </div>
        
        <div class="message-input-container">
          <textarea class="message-input" id="input" placeholder="Escribe un mensaje aquÃ­" rows="1"></textarea>
          <div class="input-smile">ðŸ˜Š</div>
        </div>
        
        <div class="voice-message-btn" id="btn">
          <div class="icon icon-send"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Socket.IO -->
  <script src="/socket.io/socket.io.js"></script>
  
  <script>
    const socket = io();
    const messagesContainer = document.getElementById("mensajes");
    const input = document.getElementById("input");
    const btn = document.getElementById("btn");
    const lastMessagePreview = document.getElementById("last-message-preview");
    const unreadCount = document.getElementById("unread-count");
    const currentTimeElement = document.getElementById("current-time");
    const currentDateElement = document.getElementById("current-date");
    
    // Set current time and date
    function updateTime() {
      const now = new Date();
      currentTimeElement.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      
      const today = new Date();
      const options = { weekday: 'long', day: 'numeric', month: 'long' };
      currentDateElement.textContent = today.toLocaleDateString('es-ES', options);
    }
    
    updateTime();
    setInterval(updateTime, 60000); // Update time every minute
    
    // Auto-resize textarea
    input.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = (this.scrollHeight) + 'px';
    });
    
    // Handle sending messages
    socket.on("message", data => {
      render(data.text, data.me, data.time);
      updateLastMessagePreview(data.text, data.me);
      updateUnreadCount();
    });
    
    btn.onclick = send;
    input.addEventListener("keydown", e => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        send();
      }
    });
    
    function send() {
      const text = input.value.trim();
      if (!text) return;
      
      socket.emit("message", { text });
      input.value = "";
      input.style.height = 'auto';
    }
    
    function render(text, me, time) {
      const messageDiv = document.createElement("div");
      messageDiv.className = `message ${me ? "sent" : "received"}`;
      
      const textDiv = document.createElement("div");
      textDiv.className = "message-text";
      textDiv.textContent = text;
      
      const timeDiv = document.createElement("div");
      timeDiv.className = "message-time";
      
      const timeString = new Date(time).toLocaleTimeString([], {
        hour: "2-digit",
        minute: "2-digit"
      });
      
      timeDiv.textContent = timeString;
      
      if (me) {
        const checkmarks = document.createElement("span");
        checkmarks.textContent = " âœ“âœ“";
        timeDiv.appendChild(checkmarks);
      }
      
      messageDiv.appendChild(textDiv);
      messageDiv.appendChild(timeDiv);
      messagesContainer.appendChild(messageDiv);
      
      // Scroll to bottom
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
    
    function updateLastMessagePreview(text, isMe) {
      const preview = isMe ? `TÃº: ${text}` : text;
      if (preview.length > 30) {
        lastMessagePreview.textContent = preview.substring(0, 30) + '...';
      } else {
        lastMessagePreview.textContent = preview;
      }
    }
    
    function updateUnreadCount() {
      // In a real app, you would track unread messages
      // For demo, we'll just show 1
      unreadCount.textContent = "1";
    }
    
    // Load initial messages from server
    socket.on("connect", () => {
      console.log("Conectado al servidor de chat");
    });
    
    // Add some initial messages for demo
    setTimeout(() => {
      render("Â¿CÃ³mo funciona este chat? Â¿Los mensajes se guardan?", false, Date.now() - 600000);
      render("SÃ­, los mensajes se guardan en la base de datos y persisten al recargar la pÃ¡gina o cambiar de dispositivo.", true, Date.now() - 300000);
    }, 1000);
  </script>
</body>
</html>